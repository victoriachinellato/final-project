import{d as L,r as i,o as r,c as u,a as e,t as D,b as p,n as h,e as G,w as I,v as A,f as J,u as F,p as E,g as U,h as K,i as O,j as M,k as V,l as z,m as f,q as P,F as Q,s as W,x as X,y as Y}from"./file_index.3b1825b6.js";import{N as Z}from"./file_NavBar.95437296.js";import{_ as j}from"./file__plugin-vue_export-helper.e718e6fb.js";import"./file_logoleave.b2556a4f.js";const B=L("task",{state:()=>({tasks:[]}),actions:{setTasks(t){this.tasks=t},doneTask(t,s){let o=this.tasks.findIndex(l=>l.id===t);this.tasks[o].is_completed=s},updateTask(t,s){let o=this.tasks.findIndex(l=>l.id===t);this.tasks[o].title=s.title,this.tasks[o].description=s.description},deleteTask(t){let s=this.tasks.findIndex(o=>o.id===t);this.tasks.splice(s,1),console.log(this.tasks)}},persist:{enabled:!0}}),ee=t=>{const s=Math.floor(t/1e3),o=Math.floor(s/60),l=Math.floor(o/60),n=Math.floor(l/24);return{seconds:s,minutes:o,hours:l,days:n}},te=t=>{let s=Math.floor(new Date(t)-new Date);s>0&&(s=0);const{seconds:o,minutes:l,hours:n,days:_}=ee(s),a=new Intl.RelativeTimeFormat("en-EN",{numeric:"auto"});return o>-60?a.format(o,"seconds"):l>-60?a.format(l,"minutes"):n>-24?a.format(n,"hours"):a.format(_,"days")};const w=t=>(E("data-v-b5f94025"),t=t(),U(),t),se={class:"card"},ae={key:0},oe={class:"card-header-title"},le={class:"m-4"},ne={key:1,class:"fa-solid fa-circle-check ml-1 check-icon"},ie={class:"content"},ce=w(()=>e("br",null,null,-1)),de={class:"date"},re={class:"card-footer"},ue={key:0,class:"card-footer-item"},ve={key:1,class:"card-footer-item"},_e={key:2,class:"card-footer-item"},ke=w(()=>e("i",{class:"fas fa-rotate-right ml-1"},null,-1)),me=w(()=>e("div",{class:"modal-background"},null,-1)),he={class:"modal-content"},fe={class:"box modal-box"},pe=w(()=>e("h1",{class:"has-text-weight-bold is-size-5"},"Are you sure you want to delete this task?",-1)),be={class:"m-5"},ge=w(()=>e("button",{class:"modal-close is-large","aria-label":"close"},null,-1)),Te={key:1,class:"card"},xe={class:"card-header header"},ye={class:"card-content"},we={class:"card-footer"},Ce={class:"card-footer-item"},$e={__name:"TasksCard",props:["task"],setup(t){const s=t,o=i(te(s.task.created_at)),l=i(s.task.title),n=i(s.task.description),_=B(),a=i(!1),b=i(),c=i(!1),T=()=>c.value=!c.value,N=async m=>{await J(m)===!0&&_.deleteTask(m)},y=()=>a.value=!a.value,$=async()=>{let m={title:l.value,description:n.value};await F(s.task.id,m)===!0&&(a.value=!a.value,_.updateTask(s.task.id,m))},v=async()=>{let m={is_completed:!s.task.is_completed};console.log(b.value),await F(s.task.id,m)===!0&&_.doneTask(s.task.id,!s.task.is_completed)};return(m,k)=>(r(),u("div",se,[a.value?p("",!0):(r(),u("div",ae,[e("header",{class:h({"card-header header":!0,done:!t.task.is_completed})},[e("p",oe,D(t.task.title),1),e("label",le,[t.task.is_completed?(r(),u("i",{key:0,onClick:v,class:"radio fa-regular fa-circle-check ml-1 check-icon"})):p("",!0),t.task.is_completed?p("",!0):(r(),u("i",ne))])],2),e("div",{class:h({"card-content":!0,done:!t.task.is_completed})},[e("div",ie,[G(D(t.task.description)+" ",1),ce,e("div",de,[e("time",null,D(o.value),1)])])],2),e("footer",re,[t.task.is_completed?(r(),u("div",ue,[t.task.is_completed?(r(),u("button",{key:0,onClick:y,class:"button no-border-buttons is-active"},"Edit")):p("",!0)])):p("",!0),t.task.is_completed?(r(),u("div",ve,[e("button",{class:"button no-border-buttons",onClick:T},"Delete")])):p("",!0),t.task.is_completed?p("",!0):(r(),u("div",_e,[e("button",{onClick:v,class:"button no-border-buttons"},"Do it again"),ke]))])])),e("div",{class:h(["modal",{"is-active":c.value}])},[me,e("div",he,[e("div",fe,[pe,e("div",be,[e("button",{class:"button m-2",onClick:k[0]||(k[0]=g=>N(t.task.id))},"Delete"),e("button",{class:"button m-2",onClick:T},"Cancel")])])]),ge],2),a.value?(r(),u("div",Te,[e("header",xe,[I(e("input",{"onUpdate:modelValue":k[1]||(k[1]=g=>l.value=g),class:"input m-4",type:"text",placeholder:"New Title"},null,512),[[A,l.value]])]),e("div",ye,[I(e("textarea",{"onUpdate:modelValue":k[2]||(k[2]=g=>n.value=g),class:"textarea",placeholder:"New Description"},null,512),[[A,n.value]])]),e("footer",we,[e("div",Ce,[e("button",{onClick:k[3]||(k[3]=g=>$(t.task.id,n.value.value,l.value.value)),class:"button no-border-buttons"},"Save")]),e("div",{class:"card-footer-item"},[e("button",{onClick:y,class:"button no-border-buttons"},"Cancel")])])])):p("",!0)]))}},Se=j($e,[["__scopeId","data-v-b5f94025"]]);const C=t=>(E("data-v-32b3a61e"),t=t(),U(),t),De={class:"progress-bar-div"},Ie={class:"has-text-weight-bold is-size-5 m-4"},Ae=["value"],Ne=C(()=>e("br",null,null,-1)),Fe={class:"is-flex is-flex-direction-column is-justify-content-center is-align-items-center"},Me=["onSubmit"],Ve=C(()=>e("button",{class:"button save-button"},"Save",-1)),ze={class:"is-flex is-justify-content-center"},Ee={class:"tabs is-centered"},Ue=C(()=>e("a",null,"To do",-1)),je=[Ue],Be=C(()=>e("a",null,"Done",-1)),He=[Be],Re=C(()=>e("a",null,"All",-1)),qe=[Re],Le={class:"container tasks-section animate__animated animate__fadeIn"},Ge={class:"columns is-multiline is-flex is-justify-content-center"},Je={__name:"Home",setup(t){const s=B(),o=K(),l=O(),n=i(""),_=i(!1),a=i(""),b=i(!1),c=i(),T=i();i();const N=i(),y=i();i(),M(async()=>{o.isAuth||l.push({name:"login"})});const $=()=>(_.value=!1,b.value=!1,T.value=!T.value),v=V(()=>(N.value=s.tasks.filter(d=>d.is_completed),y.value=s.tasks.filter(d=>!d.is_completed),s.tasks.length>0?y.value.length/s.tasks.length:0));console.log(v.value);const m=V(()=>c.value==0?s.tasks.filter(d=>d.is_completed):c.value==1?s.tasks.filter(d=>!d.is_completed):s.tasks),k=async()=>{const d=await X();s.setTasks(d),console.log(s.tasks)};M(async()=>{await k()});const g=async()=>{if(n.value.length>0?_.value=!1:_.value=!0,a.value.length>0?b.value=!1:b.value=!0,console.log(n.value,a.value),_.value===!1&&b.value===!1){let d={user_id:o.id,title:n.value,description:a.value};console.log(d),await Y(d)===!0&&console.log("nueva tarea agregada"),k(),n.value="",a.value=""}else console.log("from incompleto")},H=()=>(console.log(c.value),c.value=0),R=()=>(console.log(c.value),c.value=1),q=()=>(console.log(c.value),c.value=3);return(d,S)=>(r(),u("div",{class:h(["home-container",{"home-conteiner-succes":f(v)===1}])},[z(Z),e("div",De,[e("div",Ie,D((f(v)*100).toFixed(0))+"% Tasks completed",1),e("progress",{class:h(["progress progress-bar",{"is-danger":f(v)<.25,"is-dark":f(v)<.4,"is-warning":f(v)<.6,"is-light":f(v)<1,"is-success":f(v)===1}]),value:f(v),max:"1"},"25%",10,Ae),Ne]),e("div",Fe,[e("button",{onClick:$,class:"button is-fullwidth m-5 add-button p-0 animate__animated animate__fadeIn"},"Add a new task"),T.value?(r(),u("form",{key:0,class:"box m-5m add-task-form card animate__animated animate__fadeIn",onSubmit:P(g,["prevent"])},[I(e("input",{"onUpdate:modelValue":S[0]||(S[0]=x=>n.value=x),class:h(["input",{"is-danger":_.value}]),type:"text",placeholder:"Title"},null,2),[[A,n.value]]),I(e("textarea",{"onUpdate:modelValue":S[1]||(S[1]=x=>a.value=x),class:h(["textarea mt-4",{"is-danger":b.value}]),placeholder:"Description"},null,2),[[A,a.value]]),e("div",{class:"add-task-buttons"},[Ve,e("button",{onClick:$,class:"button cancel-button"},"Cancel")])],40,Me)):p("",!0)]),e("div",ze,[e("div",Ee,[e("ul",null,[e("li",{onClick:H,class:h({"px-5 is-size-5":!0,"is-active":c.value===0})},je,2),e("li",{onClick:R,class:h({"px-5 is-size-5":!0,"is-active":c.value===1})},He,2),e("li",{onClick:q,class:h({"px-5 is-size-5":!0,"is-active":c.value===3})},qe,2)])])]),e("div",Le,[e("div",Ge,[(r(!0),u(Q,null,W(f(m),x=>(r(),u("div",{class:"column is-12-mobile is-4-tablet is-3-desktop",key:x.id},[z(Se,{task:x},null,8,["task"])]))),128))])])],2))}},We=j(Je,[["__scopeId","data-v-32b3a61e"]]);export{We as default};
