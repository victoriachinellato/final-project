import{d as R,r as n,o as r,c as u,a as e,t as I,b as p,n as f,e as q,w as N,v as A,f as L,u as F,p as z,g as E,h as G,i as J,j as M,k as K,l as V,m as h,q as O,F as P,s as Q,x as W,y as X}from"./file_index.418e5d70.js";import{N as Y}from"./file_NavBar.af49fd8e.js";import{_ as U}from"./file__plugin-vue_export-helper.e718e6fb.js";import"./file_logoleave.b2556a4f.js";const j=R("task",{state:()=>({tasks:[]}),actions:{setTasks(t){this.tasks=t},doneTask(t,s){let l=this.tasks.findIndex(a=>a.id===t);this.tasks[l].is_completed=s},updateTask(t,s){let l=this.tasks.findIndex(a=>a.id===t);this.tasks[l].title=s.title,this.tasks[l].description=s.description},deleteTask(t){let s=this.tasks.findIndex(l=>l.id===t);this.tasks.splice(s,1),console.log(this.tasks)}},persist:{enabled:!0}}),Z=t=>{const s=Math.floor(t/1e3),l=Math.floor(s/60),a=Math.floor(l/60),i=Math.floor(a/24);return{seconds:s,minutes:l,hours:a,days:i}},ee=t=>{let s=Math.floor(new Date(t)-new Date);s>0&&(s=0);const{seconds:l,minutes:a,hours:i,days:v}=Z(s),o=new Intl.RelativeTimeFormat("en-EN",{numeric:"auto"});return l>-60?o.format(l,"seconds"):a>-60?o.format(a,"minutes"):i>-24?o.format(i,"hours"):o.format(v,"days")};const y=t=>(z("data-v-b5f94025"),t=t(),E(),t),te={class:"card"},se={key:0},ae={class:"card-header-title"},oe={class:"m-4"},le={key:1,class:"fa-solid fa-circle-check ml-1 check-icon"},ne={class:"content"},ie=y(()=>e("br",null,null,-1)),ce={class:"date"},de={class:"card-footer"},re={key:0,class:"card-footer-item"},ue={key:1,class:"card-footer-item"},ve={key:2,class:"card-footer-item"},_e=y(()=>e("i",{class:"fas fa-rotate-right ml-1"},null,-1)),ke=y(()=>e("div",{class:"modal-background"},null,-1)),me={class:"modal-content"},fe={class:"box modal-box"},he=y(()=>e("h1",{class:"has-text-weight-bold is-size-5"},"Are you sure you want to delete this task?",-1)),pe={class:"m-5"},be=y(()=>e("button",{class:"modal-close is-large","aria-label":"close"},null,-1)),ge={key:1,class:"card"},Te={class:"card-header header"},xe={class:"card-content"},ye={class:"card-footer"},we={class:"card-footer-item"},Ce={__name:"TasksCard",props:["task"],setup(t){const s=t,l=n(ee(s.task.created_at)),a=n(s.task.title),i=n(s.task.description),v=j(),o=n(!1),c=n(),b=n(!1),C=()=>b.value=!b.value,$=async k=>{await L(k)===!0&&v.deleteTask(k)},x=()=>o.value=!o.value,_=async()=>{let k={title:a.value,description:i.value};await F(s.task.id,k)===!0&&(o.value=!o.value,v.updateTask(s.task.id,k))},S=async()=>{let k={is_completed:!s.task.is_completed};console.log(c.value),await F(s.task.id,k)===!0&&v.doneTask(s.task.id,!s.task.is_completed)};return(k,m)=>(r(),u("div",te,[o.value?p("",!0):(r(),u("div",se,[e("header",{class:f({"card-header header":!0,done:!t.task.is_completed})},[e("p",ae,I(t.task.title),1),e("label",oe,[t.task.is_completed?(r(),u("i",{key:0,onClick:S,class:"radio fa-regular fa-circle-check ml-1 check-icon"})):p("",!0),t.task.is_completed?p("",!0):(r(),u("i",le))])],2),e("div",{class:f({"card-content":!0,done:!t.task.is_completed})},[e("div",ne,[q(I(t.task.description)+" ",1),ie,e("div",ce,[e("time",null,I(l.value),1)])])],2),e("footer",de,[t.task.is_completed?(r(),u("div",re,[t.task.is_completed?(r(),u("button",{key:0,onClick:x,class:"button no-border-buttons is-active"},"Edit")):p("",!0)])):p("",!0),t.task.is_completed?(r(),u("div",ue,[e("button",{class:"button no-border-buttons",onClick:C},"Delete")])):p("",!0),t.task.is_completed?p("",!0):(r(),u("div",ve,[e("button",{onClick:S,class:"button no-border-buttons"},"Do it again"),_e]))])])),e("div",{class:f(["modal",{"is-active":b.value}])},[ke,e("div",me,[e("div",fe,[he,e("div",pe,[e("button",{class:"button m-2",onClick:m[0]||(m[0]=g=>$(t.task.id))},"Delete"),e("button",{class:"button m-2",onClick:C},"Cancel")])])]),be],2),o.value?(r(),u("div",ge,[e("header",Te,[N(e("input",{"onUpdate:modelValue":m[1]||(m[1]=g=>a.value=g),class:"input m-4",type:"text",placeholder:"New Title"},null,512),[[A,a.value]])]),e("div",xe,[N(e("textarea",{"onUpdate:modelValue":m[2]||(m[2]=g=>i.value=g),class:"textarea",placeholder:"New Description"},null,512),[[A,i.value]])]),e("footer",ye,[e("div",we,[e("button",{onClick:m[3]||(m[3]=g=>_(t.task.id,i.value.value,a.value.value)),class:"button no-border-buttons"},"Save")]),e("div",{class:"card-footer-item"},[e("button",{onClick:x,class:"button no-border-buttons"},"Cancel")])])])):p("",!0)]))}},$e=U(Ce,[["__scopeId","data-v-b5f94025"]]);const w=t=>(z("data-v-fa4ba1df"),t=t(),E(),t),Se={class:"progress-bar-div"},De={class:"has-text-weight-bold is-size-5 m-4"},Ie=["value"],Ne=w(()=>e("br",null,null,-1)),Ae={class:"is-flex is-flex-direction-column is-justify-content-center is-align-items-center"},Fe=["onSubmit"],Me=w(()=>e("button",{class:"button save-button"},"Save",-1)),Ve={class:"is-flex is-justify-content-center"},ze={class:"tabs is-centered"},Ee=w(()=>e("a",null,"To do",-1)),Ue=[Ee],je=w(()=>e("a",null,"Done",-1)),Be=[je],He=w(()=>e("a",null,"All",-1)),Re=[He],qe={class:"container tasks-section animate__animated animate__fadeIn"},Le={class:"columns is-multiline is-flex is-justify-content-center"},Ge={__name:"Home",setup(t){const s=j(),l=G();J();const a=n(""),i=n(!1),v=n(""),o=n(!1),c=n(),b=n();n();const C=n(),$=n();n();const x=()=>(i.value=!1,o.value=!1,b.value=!b.value),_=M(()=>(C.value=s.tasks.filter(d=>d.is_completed),$.value=s.tasks.filter(d=>!d.is_completed),s.tasks.length>0?$.value.length/s.tasks.length:0));console.log(_.value);const S=M(()=>c.value==0?s.tasks.filter(d=>d.is_completed):c.value==1?s.tasks.filter(d=>!d.is_completed):s.tasks),k=async()=>{const d=await W();s.setTasks(d),console.log(s.tasks)};K(async()=>{await k()});const m=async()=>{if(a.value.length>0?i.value=!1:i.value=!0,v.value.length>0?o.value=!1:o.value=!0,console.log(a.value,v.value),i.value===!1&&o.value===!1){let d={user_id:l.id,title:a.value,description:v.value};console.log(d),await X(d)===!0&&console.log("nueva tarea agregada"),k(),a.value="",v.value=""}else console.log("from incompleto")},g=()=>(console.log(c.value),c.value=0),B=()=>(console.log(c.value),c.value=1),H=()=>(console.log(c.value),c.value=3);return(d,D)=>(r(),u("div",{class:f(["home-container",{"home-conteiner-succes":h(_)===1}])},[V(Y),e("div",Se,[e("div",De,I((h(_)*100).toFixed(0))+"% Tasks completed",1),e("progress",{class:f(["progress progress-bar",{"is-danger":h(_)<.25,"is-dark":h(_)<.4,"is-warning":h(_)<.6,"is-light":h(_)<1,"is-success":h(_)===1}]),value:h(_),max:"1"},"25%",10,Ie),Ne]),e("div",Ae,[e("button",{onClick:x,class:"button is-fullwidth m-5 add-button p-0 animate__animated animate__fadeIn"},"Add a new task"),b.value?(r(),u("form",{key:0,class:"box m-5m add-task-form card animate__animated animate__fadeIn",onSubmit:O(m,["prevent"])},[N(e("input",{"onUpdate:modelValue":D[0]||(D[0]=T=>a.value=T),class:f(["input",{"is-danger":i.value}]),type:"text",placeholder:"Title"},null,2),[[A,a.value]]),N(e("textarea",{"onUpdate:modelValue":D[1]||(D[1]=T=>v.value=T),class:f(["textarea mt-4",{"is-danger":o.value}]),placeholder:"Description"},null,2),[[A,v.value]]),e("div",{class:"add-task-buttons"},[Me,e("button",{onClick:x,class:"button cancel-button"},"Cancel")])],40,Fe)):p("",!0)]),e("div",Ve,[e("div",ze,[e("ul",null,[e("li",{onClick:g,class:f({"px-5 is-size-5":!0,"is-active":c.value===0})},Ue,2),e("li",{onClick:B,class:f({"px-5 is-size-5":!0,"is-active":c.value===1})},Be,2),e("li",{onClick:H,class:f({"px-5 is-size-5":!0,"is-active":c.value===3})},Re,2)])])]),e("div",qe,[e("div",Le,[(r(!0),u(P,null,Q(h(S),T=>(r(),u("div",{class:"column is-12-mobile is-4-tablet is-3-desktop",key:T.id},[V($e,{task:T},null,8,["task"])]))),128))])])],2))}},Qe=U(Ge,[["__scopeId","data-v-fa4ba1df"]]);export{Qe as default};
