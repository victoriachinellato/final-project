import{r as n,u as U,a as B,o as c,c as r,b as e,l as G,p as N,d as M,e as Y,t as C,f as m,n as h,g as I,w as S,v as D,h as J,i as A,j as F,k as K,m as j,q as $,s as P,F as z,x as Q,y as W,z as X}from"./file_index.9fee4c39.js";import{_ as V}from"./file__plugin-vue_export-helper.e718e6fb.js";const Z=t=>(N("data-v-e009c55b"),t=t(),M(),t),ee={class:"is-flex is-justify-content-space-between p-2 nav-bar"},te=Z(()=>e("div",null,[e("h1",{class:"is-size-3"},"Done")],-1)),se={__name:"NavBar",setup(t){n();const s=U(),a=B(),o=async()=>{await G()===!0?(console.log("log out succesfull"),s.push({name:"login"}),a.logout(),console.log(a.id)):console.log("something went wrong")};return(i,d)=>(c(),r("nav",ee,[te,e("button",{class:"button logout-button",onClick:o},"LOG OUT")]))}},oe=V(se,[["__scopeId","data-v-e009c55b"]]),E=Y("task",{state:()=>({tasks:[]}),actions:{setTasks(t){this.tasks=t},doneTask(t,s){let a=this.tasks.findIndex(o=>o.id===t);this.tasks[a].is_completed=s},updateTask(t,s){let a=this.tasks.findIndex(o=>o.id===t);this.tasks[a].title=s.title,this.tasks[a].description=s.description},deleteTask(t){let s=this.tasks.findIndex(a=>a.id===t);this.tasks.splice(s,1),console.log(this.tasks)}},persist:{enabled:!0}}),ae=t=>{const s=Math.floor(t/1e3),a=Math.floor(s/60),o=Math.floor(a/60),i=Math.floor(o/24);return{seconds:s,minutes:a,hours:o,days:i}},le=t=>{let s=Math.floor(new Date(t)-new Date);s>0&&(s=0);const{seconds:a,minutes:o,hours:i,days:d}=ae(s),l=new Intl.RelativeTimeFormat("en-EN",{numeric:"auto"});return a>-60?l.format(a,"seconds"):o>-60?l.format(o,"minutes"):i>-24?l.format(i,"hours"):l.format(d,"days")};const O=t=>(N("data-v-92ef871c"),t=t(),M(),t),ne={class:"card"},ie={key:0},ce={class:"card-header-title"},re={key:0,class:"radio m-4"},de={class:"content"},ue=O(()=>e("br",null,null,-1)),ve={class:"date"},_e={class:"card-footer"},ke={key:0,class:"card-footer-item"},me={key:1,class:"card-footer-item"},pe={key:2,class:"card-footer-item"},fe=O(()=>e("i",{class:"fas fa-rotate-right ml-1"},null,-1)),he={key:1,class:"card"},ge={class:"card-header header"},be={class:"card-content"},Te={class:"card-footer"},ye={class:"card-footer-item"},we={__name:"TasksCard",props:["task"],setup(t){const s=t,a=n(le(s.task.created_at)),o=n(s.task.title),i=n(s.task.description),d=E(),l=n(!1),u=n(),b=async v=>{await J(v)===!0&&d.deleteTask(v)},y=()=>(console.log(l.value),l.value=!l.value),w=async()=>{let v={title:o.value,description:i.value};await A(s.task.id,v)===!0&&(l.value=!l.value,d.updateTask(s.task.id,v))},T=async()=>{let v={is_completed:!s.task.is_completed};console.log(u.value),await A(s.task.id,v)===!0&&d.doneTask(s.task.id,!s.task.is_completed)};return(v,k)=>(c(),r("div",ne,[l.value?m("",!0):(c(),r("div",ie,[e("header",{class:h({"card-header header":!0,done:!t.task.is_completed})},[e("p",ce,C(t.task.title),1),t.task.is_completed?(c(),r("label",re,[e("i",{onClick:T,class:"fa-regular fa-circle ml-1 circle-icon"}),e("i",{onClick:T,class:"fa-regular fa-circle-check ml-1 check-icon"})])):m("",!0)],2),e("div",{class:h({"card-content":!0,done:!t.task.is_completed})},[e("div",de,[I(C(t.task.description)+" ",1),ue,e("div",ve,[e("time",null,C(a.value),1)])])],2),e("footer",_e,[t.task.is_completed?(c(),r("div",ke,[t.task.is_completed?(c(),r("button",{key:0,onClick:y,class:"button no-border-buttons is-active"},"Edit")):m("",!0)])):m("",!0),t.task.is_completed?(c(),r("div",me,[t.task.is_completed?(c(),r("button",{key:0,onClick:k[0]||(k[0]=p=>b(t.task.id)),class:"button no-border-buttons"},"Delete")):m("",!0)])):m("",!0),t.task.is_completed?m("",!0):(c(),r("div",pe,[e("button",{onClick:T,class:"button no-border-buttons"},"Do it again"),fe]))])])),l.value?(c(),r("div",he,[e("header",ge,[S(e("input",{"onUpdate:modelValue":k[1]||(k[1]=p=>o.value=p),class:"input m-4",type:"text",placeholder:"New Title"},null,512),[[D,o.value]])]),e("div",be,[S(e("textarea",{"onUpdate:modelValue":k[2]||(k[2]=p=>i.value=p),class:"textarea",placeholder:"New Description"},null,512),[[D,i.value]])]),e("footer",Te,[e("div",ye,[e("button",{onClick:k[3]||(k[3]=p=>w(t.task.id,i.value.value,o.value.value)),class:"button no-border-buttons"},"Save")]),e("div",{class:"card-footer-item"},[e("button",{onClick:y,class:"button no-border-buttons"},"Cancel")])])])):m("",!0)]))}},xe=V(we,[["__scopeId","data-v-92ef871c"]]);const g=t=>(N("data-v-0a6ae59b"),t=t(),M(),t),$e={class:"is-flex is-justify-content-center p-5"},Ce=["value"],Se=g(()=>e("br",null,null,-1)),De={class:"is-flex is-flex-direction-column is-justify-content-center is-align-items-center"},Ie=["onSubmit"],Ne=g(()=>e("button",{class:"button mt-4"},"Save",-1)),Me={class:"is-flex is-justify-content-center"},Ve={class:"tabs is-centered"},Ae=g(()=>e("a",null,"To do",-1)),Fe=[Ae],je=g(()=>e("a",null,"Done",-1)),ze=[je],Ue=g(()=>e("a",null,"All",-1)),Be=[Ue],Ee=g(()=>e("div",{class:"dropdown is-hoverable"},[e("div",{class:"dropdown-trigger"},[e("button",{class:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},[e("span",null,"by time"),e("span",{class:"icon is-small"},[e("i",{class:"fas fa-angle-down","aria-hidden":"true"})])])]),e("div",{class:"dropdown-menu",id:"dropdown-menu4",role:"menu"},[e("div",{class:"dropdown-content"},[e("div",{class:"dropdown-item"},[e("p",null,[I("You can insert "),e("strong",null,"any type of content"),I(" within the dropdown menu.")])])])])],-1)),Oe={class:"container tasks-section"},Re={class:"columns is-multiline is-flex is-justify-content-center"},He={__name:"Home",setup(t){const s=E(),a=B();U();const o=n(""),i=n(!1),d=n(""),l=n(!1),u=n(),b=n();n();const y=n(),w=n();n();const T=()=>b.value=!b.value,v=F(()=>(y.value=s.tasks.filter(_=>_.is_completed),w.value=s.tasks.filter(_=>!_.is_completed),w.value.length/s.tasks.length));console.log(v.value);const k=F(()=>u.value==0?s.tasks.filter(_=>_.is_completed):u.value==1?s.tasks.filter(_=>!_.is_completed):s.tasks),p=async()=>{const _=await W();s.setTasks(_),console.log(s.tasks)};K(async()=>{await p()});const R=async()=>{if(o.value.length>0?i.value=!1:i.value=!0,d.value.length>0?l.value=!1:l.value=!0,console.log(o.value,d.value),i.value===!1&&l.value===!1){let _={user_id:a.id,title:o.value,description:d.value};console.log(_),await X(_)===!0&&console.log("nueva tarea agregada"),p(),o.value="",d.value=""}else console.log("from incompleto")},H=()=>(console.log(u.value),u.value=0),L=()=>(console.log(u.value),u.value=1),q=()=>(console.log(u.value),u.value=3);return(_,x)=>(c(),r(z,null,[j(oe),e("div",$e,[e("progress",{class:h(["progress progress-bar",{"is-primary":$(v)<.25}]),value:$(v),max:"1"},"25%",10,Ce),Se,e("div",null,C($(v)),1)]),e("div",De,[e("button",{onClick:T,class:"button is-fullwidth m-5 add-button p-0"},"Add a new task"),b.value?(c(),r("form",{key:0,class:"box m-5m add-task-form",onSubmit:P(R,["prevent"])},[S(e("input",{"onUpdate:modelValue":x[0]||(x[0]=f=>o.value=f),class:"input",type:"text",placeholder:"Title"},null,512),[[D,o.value]]),S(e("textarea",{"onUpdate:modelValue":x[1]||(x[1]=f=>d.value=f),class:"textarea mt-4",placeholder:"Description"},null,512),[[D,d.value]]),Ne],40,Ie)):m("",!0)]),e("div",Me,[e("div",Ve,[e("ul",null,[e("li",{onClick:H,class:h({"px-5 is-size-5":!0,"is-active":u.value===0})},Fe,2),e("li",{onClick:L,class:h({"px-5 is-size-5":!0,"is-active":u.value===1})},ze,2),e("li",{onClick:q,class:h({"px-5 is-size-5":!0,"is-active":u.value===3})},Be,2)]),Ee])]),e("div",Oe,[e("div",Re,[(c(!0),r(z,null,Q($(k),f=>(c(),r("div",{class:"column is-12-mobile is-4-tablet is-3-desktop",key:f.id},[j(xe,{task:f},null,8,["task"])]))),128))])])],64))}},Ge=V(He,[["__scopeId","data-v-0a6ae59b"]]);export{Ge as default};
